<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Membership Plans</title>

    <!-- Bootstrap -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <!-- Your existing CSS -->
    <link rel="stylesheet" href="style.css" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <style>
      /* ---------- ENHANCED PLAN UI ---------- */
      .plan-card.enhanced {
        background: linear-gradient(180deg, #ffffff, #fafbff);
        border-radius: 16px;
        padding: 30px 24px;
        height: 100%;
        box-shadow: 0 12px 30px rgba(0, 0, 0, 0.08);
        transition: all 0.25s ease;
        position: relative;
        text-align: center;
      }

      .plan-card.enhanced:hover {
        transform: translateY(-6px);
        box-shadow: 0 18px 40px rgba(0, 0, 0, 0.12);
      }

      .plan-card.enhanced h3 {
        font-size: 22px;
        margin-bottom: 10px;
      }

      .plan-card.enhanced .price {
        margin-bottom: 18px;
      }

      .plan-card.enhanced .amount {
        font-size: 28px;
        font-weight: 700;
        color: #4f46e5;
      }

      .plan-card.enhanced .duration {
        font-size: 14px;
        color: #666;
      }

      .plan-card.enhanced ul {
        list-style: none;
        padding: 0;
        margin-bottom: 22px;
      }

      .plan-card.enhanced ul li {
        font-size: 14px;
        margin-bottom: 8px;
        color: #444;
      }

      .plan-card.enhanced.popular {
        border: 2px solid #4f46e5;
        background: linear-gradient(180deg, #eef2ff, #ffffff);
      }

      .plan-card.enhanced .badge {
        position: absolute;
        top: -12px;
        right: 20px;
        background: #4f46e5;
        color: #fff;
        padding: 6px 14px;
        border-radius: 999px;
        font-size: 12px;
        font-weight: 600;
      }
      /* EDIT ICON – TOP RIGHT */
      .edit-icon {
        position: absolute;
        top: 14px;
        right: 14px;
        font-size: 14px;
        background: #f1f3ff;
        color: #4f46e5;
        padding: 6px 8px;
        border-radius: 8px;
        text-decoration: none;
        font-weight: 600;
        transition: all 0.2s ease;
      }

      .edit-icon:hover {
        background: #4f46e5;
        color: #ffffff;
        transform: scale(1.05);
      }
    </style>
  </head>

  <body>
    <!-- HEADER -->
    <header class="header">
      <div class="logo">Membership Management</div>
      <nav>
        <a href="index.html">Dashboard</a>
        <a href="members.html">Members</a>
        <a href="plans.html">Plans</a>
        <a href="payments.html">Payments</a>
        <a href="whatsapp-notifications.html">Whatsapp</a>
        <a href="#">Logout</a>
      </nav>
    </header>

    <!-- MAIN -->
    <main class="container my-4">
      <div
        class="table-header mb-4 d-flex justify-content-between align-items-center"
      >
        <h2 class="page-title">Membership Plans</h2>
        <a href="#add-plan-modal" class="add-member-btn">+ Add Plan</a>
      </div>

      <!-- PLANS GRID -->
      <section class="row g-4" id="plansContainer">
        <!-- Rendered by JS -->
      </section>
    </main>

    <!-- FOOTER -->
    <footer class="footer text-center py-3">
      © 2025 Membership Management. All rights reserved.
    </footer>

    <!-- ADD PLAN MODAL -->
    <div id="add-plan-modal" class="modal">
      <div class="modal-content">
        <h3>Add Membership Plan</h3>

        <form class="modal-form" onsubmit="addPlan(event)">
          <label>Plan Name</label>
          <input id="addName" type="text" required />

          <label>Price</label>
          <input id="addPrice" type="text" required />

          <label>Duration</label>
          <input id="addDuration" type="text" required />

          <label>Features</label>
          <textarea
            id="addFeatures"
            placeholder="One feature per line"
          ></textarea>

          <div class="modal-actions">
            <a
              href="#"
              class="primary-btn"
              style="
                background-color: #e5e7eb;
                color: black;
                align-items: center;
                display: flex;
                justify-content: center;
                text-decoration: none;
              "
              >Cancel</a
            >

            <button class="primary-btn">Save Plan</button>
          </div>
        </form>
      </div>
    </div>

    <!-- EDIT PLAN MODAL -->
    <div id="edit-plan-modal" class="modal">
      <div class="modal-content">
        <h3>Edit Membership Plan</h3>

        <form class="modal-form" onsubmit="updatePlan(event)">
          <label>Plan Name</label>
          <input id="editName" type="text" required />

          <label>Price</label>
          <input id="editPrice" type="text" required />

          <label>Duration</label>
          <input id="editDuration" type="text" required />

          <label>Features</label>
          <textarea id="editFeatures"></textarea>

          <div class="modal-actions">
            <a
              href="#"
              class="primary-btn"
              style="
                background-color: #e5e7eb;
                color: black;
                align-items: center;
                display: flex;
                justify-content: center;
                text-decoration: none;
              "
              >Cancel</a
            >

            <button class="primary-btn">Update Plan</button>
          </div>
        </form>
      </div>
    </div>

    <!-- SCRIPT -->
    <script>
      let plans = JSON.parse(sessionStorage.getItem("plans")) || [
        {
          id: 1,
          name: "Basic",
          price: "₹999",
          duration: "month",
          features: ["Single member access", "Email support"],
        },
        {
          id: 2,
          name: "Gold",
          price: "₹2,499",
          duration: "3 months",
          features: ["Priority support", "Multiple members"],
        },
        {
          id: 3,
          name: "Platinum",
          price: "₹4,999",
          duration: "6 months",
          features: ["Unlimited members", "Dedicated support"],
        },
      ];

      let editPlanId = null;

      function savePlans() {
        sessionStorage.setItem("plans", JSON.stringify(plans));
      }

      function renderPlans() {
        const container = document.getElementById("plansContainer");
        container.innerHTML = "";

        plans.forEach((plan) => {
          container.innerHTML += `
            <div class="col-lg-4 col-md-6 col-sm-12">
  <div class="plan-card enhanced ${plan.popular ? "popular" : ""}">
    
    <!-- EDIT ICON (TOP RIGHT) -->
    <a href="#edit-plan-modal"
       class="edit-icon"
       onclick="openEdit(${plan.id})"
       title="Edit Plan">✏️</a>

    ${plan.popular ? '<span class="badge">Most Popular</span>' : ""}

    <h3>${plan.name}</h3>

    <p class="price">
      <span class="amount">${plan.price}</span>
      <span class="duration"> / ${plan.duration}</span>
    </p>

    <ul>
      ${plan.features.map((f) => `<li>✔ ${f}</li>`).join("")}
    </ul>

  </div>
</div>

          `;
        });
      }

      function addPlan(e) {
        e.preventDefault();

        plans.push({
          id: Date.now(),
          name: addName.value,
          price: addPrice.value,
          duration: addDuration.value,
          features: addFeatures.value.split("\n"),
        });

        savePlans();
        renderPlans();
        location.hash = "";
        e.target.reset();
      }

      function openEdit(id) {
        const plan = plans.find((p) => p.id === id);
        editPlanId = id;

        editName.value = plan.name;
        editPrice.value = plan.price;
        editDuration.value = plan.duration;
        editFeatures.value = plan.features.join("\n");
      }

      function updatePlan(e) {
        e.preventDefault();

        const plan = plans.find((p) => p.id === editPlanId);
        plan.name = editName.value;
        plan.price = editPrice.value;
        plan.duration = editDuration.value;
        plan.features = editFeatures.value.split("\n");

        savePlans();
        renderPlans();
        location.hash = "";
      }

      window.onload = renderPlans;
    </script>
  </body>
</html>
